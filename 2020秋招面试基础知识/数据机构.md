## 1. epoll是如何实现的？

epoll的底层实现是红黑树和双向链表。首先epoll_create系统调用在内核中的创建句柄，包括红黑树根节点和双向链表头节点。然后利用epoll_ctl系统调用向红黑树结构中增加，删除或者修改感兴趣事件。然后通过epoll_wait系统调用判断双向链表是否为空，如果为空则阻塞。当文件描述符状态改变时，fd上的回调函数被调用，把fd加入到双向链表中，此时epoll_wait函数被唤醒，返回就绪好的事件。

